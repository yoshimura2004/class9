<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.addEventListener('load', bind)
        function bind(){
            document.querySelector('#btn1')
                .addEventListener('click', function(){

                    // ajax 객체 생성
                    const xhr = new XMLHttpRequest();

                    // 보낼 준비
                    // 방식method, 주소
                    xhr.open('get', 'https://jsonplaceholder.typicode.com/users')
                    
                    // 보내기
                    xhr.send()

                    xhr.onload = function(){
                        console.log('다녀왔습니다')
                        // xhr.responseText : 응답 받은 내용이 담겨있음
                        console.log(xhr.responseText)
                        const data = JSON.parse( xhr.responseText )
                        console.log(data)
                        console.log(data[0])
                        console.log(data[0].username)
                        console.log(data[0]['username'])
                        console.log(data[0].address.geo.lat)
                    }
                })
            document.querySelector('#btn2')
                .addEventListener('click', function(){

                    // ajax 객체 생성
                    const xhr = new XMLHttpRequest();

                    // 보낼 준비
                    // 방식method, 주소
                    xhr.open('get', 'https://crix-api-cdn.upbit.com/v1/crix/candles/minutes/30?code=CRIX.UPBIT.KRW-BTC&count=2&to=2025-07-14T06%3A19%3A39Z&timestamp=1752474012515')
                    
                    // 보내기
                    xhr.send()

                    xhr.onload = function(){
                        console.log(xhr.responseText)
                        const data = JSON.parse( xhr.responseText )
                        console.log(data[0].tradePrice)
                    }
                })
            document.querySelector('#btn3')
                .addEventListener('click', function(){

                    // ajax 객체 생성
                    const xhr = new XMLHttpRequest();

                    // 보낼 준비
                    // 방식method, 주소
                    // CORS 문제로 막힘
                    xhr.open('get', 'https://polling.finance.naver.com/api/realtime?query=SERVICE_ITEM:005930|SERVICE_RECENT_ITEM:005930,035720&_callback=window.__jindo2_callback._9001')
                    
                    // 보내기
                    xhr.send()

                    xhr.onload = function(){
                        console.log(xhr.responseText)
                        const data = JSON.parse( xhr.responseText )
                        console.log(data[0].tradePrice)
                    }
                })
            document.querySelector('#btn4')
                .addEventListener('click', function(){

                    const xhr = new XMLHttpRequest();
                    xhr.open('get', 'http://humanjobs.co.kr')
                    xhr.send()
                    xhr.onload = function(){
                        console.log(xhr.responseText)
                    }

                })
                
            document.querySelector('#btn5')
                .addEventListener('click', function(){
                    const serviceKey = 'qVTaW2lslPLGXY2uHKVY3Vuc66ZQmC950RmMKYEg4Grvfz%2FeYbsd%2Fp4F0CzdQQwC26aBf2fTEHW76VU0OA04RQ%3D%3D'
                    let url = 'http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst'
                    url += '?serviceKey='+ serviceKey
                    url += '&numOfRows=1000'
                    url += '&pageNo=1'
                    url += '&dataType=JSON'
                    url += '&base_date=20250715'
                    url += '&base_time=0800'
                    url += '&nx=63'
                    url += '&ny=110'

                    const xhr = new XMLHttpRequest();
                    xhr.open('get', url)
                    xhr.send()
                    xhr.onload = function(){

                        const data = JSON.parse(xhr.responseText)
                        const base_time = data.response.body.items.item;
                    const result = {
                    RN1: [],
                    T1H: [],
                    REH: []
                    };
                    base_time.forEach(e => {
                    if (e.category == 'RN1') {
                    result.RN1.push({
                    time: e.fcstTime,
                    value: e.fcstValue
                    });
                    } else if (e.category =='T1H') {
                    result.T1H.push({
                    time: e.fcstTime,
                    value: e.fcstValue
                    });
                    } else if (e.category == 'REH') {
                    result.REH.push({
                    time: e.fcstTime,
                    value: e.fcstValue
                    });
                    }
                    });
                    console.log(result.RN1);
                    console.log(result.T1H);
                    console.log(result.REH);
                    };

                  })
        
                    


                document.querySelector('#btn6')
                .addEventListener('click', function(){
                    const serviceKey = 'qVTaW2lslPLGXY2uHKVY3Vuc66ZQmC950RmMKYEg4Grvfz%2FeYbsd%2Fp4F0CzdQQwC26aBf2fTEHW76VU0OA04RQ%3D%3D'
                    let url = 'http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst'
                    url += '?serviceKey='+ serviceKey
                    url += '&numOfRows=1000'
                    url += '&pageNo=1'
                    url += '&dataType=JSON'
                    url += '&base_date=20250715'
                    url += '&base_time=0900'
                    url += '&nx=63'
                    url += '&ny=110'

                    const xhr = new XMLHttpRequest();
                    xhr.open('get', url)
                    xhr.send()
                    xhr.onload = function(){
                        console.log(xhr.responseText)
                        const data = JSON.parse(xhr.responseText)
                        console.log(data)
                    }
                })  
        }
      
//  금일 시간 온도 날씨 강수량 습도 가져오기 테이블 만들기
// 

//   // for in은 인덱스를 뽑아준다.
//     //  json에서의 인덱스는 key를 뜻한다.
//     for(let k in json){
//         console.log("k:", k, json[k])
//     }

//     // json의 모든 key를 배열로 가져오기.
//     const keys = Object.keys(json)
//     console.log("keys :", keys)

    </script>
       

        
    </script>
    <style>
      
    </style>
</head>
<body>
    <button type="button" id="btn1">ajax 실행</button><br>
    <button type="button" id="btn2">업비트</button><br>
    <button type="button" id="btn3">네이버주식</button><br>
    <button type="button" id="btn4">휴먼잡스</button><br>
    <button type="button" id="btn5">날씨예보</button><br>
    <button type="button" id="btn6">금일날씨예보</button><br>


</div>
</body>
</html>